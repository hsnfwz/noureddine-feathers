---
// utils
import { getProducts } from 'utils/api';

// layouts
import Layout from 'layouts/Layout.astro';

// components
import Nav from 'components/Nav/Nav.svelte';
import Heading from 'components/shared/Heading.svelte';
import ProductCardGrid from 'components/ProductCardGrid/ProductCardGrid.svelte';
import Link from 'components/shared/Link.svelte';
import Footer from 'components/Footer/Footer.svelte';

// types
import type NavPropsType from 'types/props/NavPropsType';
import type ProductType from 'types/ProductType';
import type HeadingPropsType from 'types/props/HeadingPropsType';
import type LinkPropsType from 'types/props/LinkPropsType';

const navProps: NavPropsType = {
  pathname: Astro.url.pathname,
}

const featherDusters: ProductType[] | undefined = await getProducts({ category: 'Feather Dusters' });

const blackFeatherDusters = featherDusters && featherDusters.filter((featherDuster: ProductType) => featherDuster.color === 'Premium Black');

const grayFeatherDusters = featherDusters && featherDusters.filter((featherDuster: ProductType) => featherDuster.color === 'Premium Gray');

const blackFeatherDustersHeadingProps: HeadingPropsType = {
  text: 'Feather Dusters - Premium Black',
  bold: true,
  uppercase: true,
}

const grayFeatherDustersHeadingProps: HeadingPropsType = {
  text: 'Feather Dusters - Premium Gray',
  bold: true,
  uppercase: true,
}

const featherDustersLinkProps: LinkPropsType = {
  href: '/feather-dusters',
  ariaLabel: 'feather dusters',
  text: 'View All',
}
---

<Layout title="Noureddine Feathers">
  <Nav {...navProps} client:load />
  <div class="mx-8">
    <div class="flex flex-col gap-8">
      <div class="flex flex-col md:flex-row gap-4">
        <div class="flex flex-grow items-center">
          <Heading {...blackFeatherDustersHeadingProps} />
        </div>
        <div class="flex items-center ">
          <Link {...featherDustersLinkProps} />
        </div>
      </div>
      <ProductCardGrid products={blackFeatherDusters} client:load />
      <div class="flex flex-col md:flex-row gap-4">
        <div class="flex flex-grow items-center">
          <Heading {...grayFeatherDustersHeadingProps} />
        </div>
        <div class="flex items-center">
          <Link {...featherDustersLinkProps} />
        </div>
      </div>
      <ProductCardGrid products={grayFeatherDusters} client:load />
    </div>
  </div>
  <Footer client:load />
</Layout>